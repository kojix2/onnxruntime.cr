crystal_doc_search_index_callback({"repository_name":"onnxruntime","body":"# onnxruntime.cr\n\n[![build](https://github.com/kojix2/onnxruntime.cr/actions/workflows/test.yml/badge.svg)](https://github.com/kojix2/onnxruntime.cr/actions/workflows/test.yml)\n[![Lines of Code](https://img.shields.io/endpoint?url=https%3A%2F%2Ftokei.kojix2.net%2Fbadge%2Fgithub%2Fkojix2%2Fonnxruntime.cr%2Flines)](https://tokei.kojix2.net/github/kojix2/onnxruntime.cr)\n\n[ONNX Runtime](https://github.com/Microsoft/onnxruntime) bindings for Crystal\n\n## Installation\n\n1. Install ONNX Runtime\n\n   Download and install the ONNX Runtime from the [official releases](https://github.com/microsoft/onnxruntime/releases).\n\n   For Linux:\n\n   ```bash\n   # Example for Linux\n   wget https://github.com/microsoft/onnxruntime/releases/download/v1.21.0/onnxruntime-linux-x64-1.21.0.tgz\n   tar -xzf onnxruntime-linux-x64-1.21.0.tgz\n   export ONNXRUNTIME_DIR=/path/to/onnxruntime-linux-x64-1.21.0\n   ```\n\n   For macOS:\n\n   ```bash\n   # Example for macOS (arm64)\n   curl -L https://github.com/microsoft/onnxruntime/releases/download/v1.21.0/onnxruntime-osx-arm64-1.21.0.tgz -o onnxruntime-osx-arm64-1.21.0.tgz\n   tar -xzf onnxruntime-osx-arm64-1.21.0.tgz\n   export ONNXRUNTIME_DIR=/path/to/onnxruntime-osx-arm64-1.21.0\n   ```\n\n2. Add the dependency to your `shard.yml`:\n\n   ```yaml\n   dependencies:\n     onnxruntime:\n       github: kojix2/onnxruntime.cr\n   ```\n\n3. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"onnxruntime\"\n\n# Load a model\nsession = OnnxRuntime::InferenceSession.new(\"path/to/model.onnx\")\n\n# Print model inputs and outputs\nputs \"Inputs:\"\nsession.inputs.each do |input|\n  puts \"  #{input.name}: #{input.type} #{input.shape}\"\nend\n\nputs \"Outputs:\"\nsession.outputs.each do |output|\n  puts \"  #{output.name}: #{output.type} #{output.shape}\"\nend\n\n# Prepare input data\ninput_data = {\n  \"input_name\" => [1.0_f32, 2.0_f32, 3.0_f32]\n}\n\n# Run inference\nresult = session.run(input_data)\n\n# Process results\nresult.each do |name, data|\n  puts \"#{name}: #{data}\"\nend\n\n# Explicitly release resources\nsession.release_session\nOnnxRuntime::InferenceSession.release_env\n```\n\n## MNIST Example\n\nDownload the MNIST model: [mnist-12.onnx](https://github.com/onnx/models/blob/main/validated/vision/classification/mnist/model/mnist-12.onnx) ([raw](https://github.com/onnx/models/raw/refs/heads/main/validated/vision/classification/mnist/model/mnist-12.onnx)\n\n```crystal\nrequire \"onnxruntime\"\n\n# Load the MNIST model\nsession = OnnxRuntime::InferenceSession.new(\"mnist-12.onnx\")\n\n# Create a dummy input (28x28 image draw 1)\ninput_data = Array(Float32).new(28 * 28) { |i| (i % 14 == 0 ? 1.0 : 0.0).to_f32 }\n\n# Run inference\nresult = session.run({\"Input3\" => input_data}, [\"Plus214_Output_0\"], shape: {\"Input3\" => [1_i64, 1_i64, 28_i64, 28_i64]})\n\n# Get the output probabilities\nprobabilities = result[\"Plus214_Output_0\"].as(Array(Float32))\n\n# Find the digit with highest probability\npredicted_digit = probabilities.index(probabilities.max)\nputs \"Predicted digit: #{predicted_digit}\"\n\n# Explicitly release resources\nsession.release_session\nOnnxRuntime::InferenceSession.release_env\n```\n\n## Memory Management\n\nCurrently, you must explicitly release resources when you're done with them:\n\n```crystal\n# Create and use session\nsession = OnnxRuntime::InferenceSession.new(\"path/to/model.onnx\")\nresult = session.run(input_data)\n\n# When finished, explicitly release resources\nsession.release_session\nOnnxRuntime::InferenceSession.release_env\n```\n\nFor long-running applications like web servers, consider setting up signal handlers to ensure resources are properly released on shutdown:\n\n```crystal\nSignal::INT.trap do\n  puts \"Shutting down...\"\n  session.release_session\n  OnnxRuntime::InferenceSession.release_env\n  exit\nend\n```\n\nSee the examples directory for more detailed implementations.\n\nWhy do you need to manually free memory?\n\nPreviously, the following error was displayed on macOS.\n\n```\nlibc++abi: terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument\nProgram received and didn't handle signal ABRT (6)\n```\n\nThis seems to be related to multithreading and mutex. According to the AI, this is difficult to solve with `finalize`, so we tried to solve it by creating a reference counter, but we were unable to solve it in the end. If you can solve this problem, please create a pull request!\n\n## Development\n\nThe code is generated by AI and may not be perfect.\nPlease feel free to contribute and improve it.\n\n## Contributing\n\n1. Fork it (<https://github.com/kojix2/onnxruntime.cr/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n","program":{"html_id":"onnxruntime/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"onnxruntime","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"onnxruntime/OnnxRuntime","path":"OnnxRuntime.html","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime","abstract":false,"locations":[{"filename":"src/onnxruntime.cr","line_number":14,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime.cr#L14"},{"filename":"src/onnxruntime/inference_session.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L1"},{"filename":"src/onnxruntime/io_binding.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L1"},{"filename":"src/onnxruntime/libonnxruntime.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/libonnxruntime.cr#L1"},{"filename":"src/onnxruntime/model_metadata.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L1"},{"filename":"src/onnxruntime/ort_environment.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L1"},{"filename":"src/onnxruntime/provider.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L1"},{"filename":"src/onnxruntime/run_options.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L1"},{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L1"},{"filename":"src/onnxruntime/tensor.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L1"},{"filename":"src/onnxruntime/tensor_info.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L1"},{"filename":"src/onnxruntime/training_session.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L1"},{"filename":"src/onnxruntime/version.cr","line_number":1,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/version.cr#L1"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.1.0\""}],"class_methods":[{"html_id":"create_provider(name:String,session:InferenceSession,**options)-class-method","name":"create_provider","doc":"Factory method to create providers","summary":"<p>Factory method to create providers</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"session","external_name":"session","restriction":"InferenceSession"}],"args_string":"(name : String, session : InferenceSession, **options)","args_html":"(name : String, session : <a href=\"OnnxRuntime/InferenceSession.html\">InferenceSession</a>, **options)","location":{"filename":"src/onnxruntime/provider.cr","line_number":127,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L127"},"def":{"name":"create_provider","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"session","external_name":"session","restriction":"InferenceSession"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"case name.downcase\nwhen \"cpu\", \"cpuexecutionprovider\"\n  use_arena = options[\"use_arena\"]? || true\n  CpuProvider.new(CpuProviderOptions.new(use_arena))\nwhen \"cuda\", \"cudaexecutionprovider\"\n  device_id = options[\"device_id\"]? || 0\n  gpu_mem_limit = options[\"gpu_mem_limit\"]? || 0_u64\n  arena_extend_strategy = options[\"arena_extend_strategy\"]? || 0\n  cudnn_conv_algo_search = options[\"cudnn_conv_algo_search\"]? || 0\n  do_copy_in_default_stream = options[\"do_copy_in_default_stream\"]? || true\n  CudaProvider.new(CudaProviderOptions.new(session, device_id, gpu_mem_limit, arena_extend_strategy, cudnn_conv_algo_search, do_copy_in_default_stream))\nelse\n  raise(\"Unsupported provider: #{name}\")\nend"},"external_var":false}],"types":[{"html_id":"onnxruntime/OnnxRuntime/CpuProvider","path":"OnnxRuntime/CpuProvider.html","kind":"class","full_name":"OnnxRuntime::CpuProvider","name":"CpuProvider","abstract":false,"superclass":{"html_id":"onnxruntime/OnnxRuntime/Provider","kind":"class","full_name":"OnnxRuntime::Provider","name":"Provider"},"ancestors":[{"html_id":"onnxruntime/OnnxRuntime/Provider","kind":"class","full_name":"OnnxRuntime::Provider","name":"Provider"},{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":18,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L18"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"CPU execution provider","summary":"<p>CPU execution provider</p>","constructors":[{"html_id":"new(options:CpuProviderOptions|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"options","default_value":"nil","external_name":"options","restriction":"CpuProviderOptions | ::Nil"}],"args_string":"(options : CpuProviderOptions | Nil = nil)","args_html":"(options : <a href=\"../OnnxRuntime/CpuProviderOptions.html\">CpuProviderOptions</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/provider.cr","line_number":19,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L19"},"def":{"name":"new","args":[{"name":"options","default_value":"nil","external_name":"options","restriction":"CpuProviderOptions | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"name:String-instance-method","name":"name","doc":"Get the provider name","summary":"<p>Get the provider name</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":22,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L22"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"\"CPUExecutionProvider\""},"external_var":false},{"html_id":"options:ProviderOptions|Nil-instance-method","name":"options","doc":"Get the provider options","summary":"<p>Get the provider options</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":26,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L26"},"def":{"name":"options","return_type":"ProviderOptions | ::Nil","visibility":"Public","body":"@options"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/CpuProviderOptions","path":"OnnxRuntime/CpuProviderOptions.html","kind":"class","full_name":"OnnxRuntime::CpuProviderOptions","name":"CpuProviderOptions","abstract":false,"superclass":{"html_id":"onnxruntime/OnnxRuntime/ProviderOptions","kind":"class","full_name":"OnnxRuntime::ProviderOptions","name":"ProviderOptions"},"ancestors":[{"html_id":"onnxruntime/OnnxRuntime/ProviderOptions","kind":"class","full_name":"OnnxRuntime::ProviderOptions","name":"ProviderOptions"},{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":32,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L32"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"CPU provider options","summary":"<p>CPU provider options</p>","constructors":[{"html_id":"new(use_arena=true)-class-method","name":"new","abstract":false,"args":[{"name":"use_arena","default_value":"true","external_name":"use_arena","restriction":""}],"args_string":"(use_arena = true)","args_html":"(use_arena = <span class=\"n\">true</span>)","location":{"filename":"src/onnxruntime/provider.cr","line_number":37,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L37"},"def":{"name":"new","args":[{"name":"use_arena","default_value":"true","external_name":"use_arena","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(use_arena)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"to_unsafe:Hash(String,String)-instance-method","name":"to_unsafe","doc":"Get the underlying options as a hash","summary":"<p>Get the underlying options as a hash</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":42,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L42"},"def":{"name":"to_unsafe","visibility":"Public","body":"@options"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/CudaProvider","path":"OnnxRuntime/CudaProvider.html","kind":"class","full_name":"OnnxRuntime::CudaProvider","name":"CudaProvider","abstract":false,"superclass":{"html_id":"onnxruntime/OnnxRuntime/Provider","kind":"class","full_name":"OnnxRuntime::Provider","name":"Provider"},"ancestors":[{"html_id":"onnxruntime/OnnxRuntime/Provider","kind":"class","full_name":"OnnxRuntime::Provider","name":"Provider"},{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":48,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L48"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"CUDA execution provider","summary":"<p>CUDA execution provider</p>","constructors":[{"html_id":"new(options:CudaProviderOptions|Nil=nil)-class-method","name":"new","abstract":false,"args":[{"name":"options","default_value":"nil","external_name":"options","restriction":"CudaProviderOptions | ::Nil"}],"args_string":"(options : CudaProviderOptions | Nil = nil)","args_html":"(options : <a href=\"../OnnxRuntime/CudaProviderOptions.html\">CudaProviderOptions</a> | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/provider.cr","line_number":49,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L49"},"def":{"name":"new","args":[{"name":"options","default_value":"nil","external_name":"options","restriction":"CudaProviderOptions | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"name:String-instance-method","name":"name","doc":"Get the provider name","summary":"<p>Get the provider name</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":52,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L52"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"\"CUDAExecutionProvider\""},"external_var":false},{"html_id":"options:ProviderOptions|Nil-instance-method","name":"options","doc":"Get the provider options","summary":"<p>Get the provider options</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":56,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L56"},"def":{"name":"options","return_type":"ProviderOptions | ::Nil","visibility":"Public","body":"@options"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/CudaProviderOptions","path":"OnnxRuntime/CudaProviderOptions.html","kind":"class","full_name":"OnnxRuntime::CudaProviderOptions","name":"CudaProviderOptions","abstract":false,"superclass":{"html_id":"onnxruntime/OnnxRuntime/ProviderOptions","kind":"class","full_name":"OnnxRuntime::ProviderOptions","name":"ProviderOptions"},"ancestors":[{"html_id":"onnxruntime/OnnxRuntime/ProviderOptions","kind":"class","full_name":"OnnxRuntime::ProviderOptions","name":"ProviderOptions"},{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":62,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L62"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"CUDA provider options","summary":"<p>CUDA provider options</p>","constructors":[{"html_id":"new(session:InferenceSession,device_id=0,gpu_mem_limit=0_u64,arena_extend_strategy=0,cudnn_conv_algo_search=0,do_copy_in_default_stream=true)-class-method","name":"new","abstract":false,"args":[{"name":"session","external_name":"session","restriction":"InferenceSession"},{"name":"device_id","default_value":"0","external_name":"device_id","restriction":""},{"name":"gpu_mem_limit","default_value":"0_u64","external_name":"gpu_mem_limit","restriction":""},{"name":"arena_extend_strategy","default_value":"0","external_name":"arena_extend_strategy","restriction":""},{"name":"cudnn_conv_algo_search","default_value":"0","external_name":"cudnn_conv_algo_search","restriction":""},{"name":"do_copy_in_default_stream","default_value":"true","external_name":"do_copy_in_default_stream","restriction":""}],"args_string":"(session : InferenceSession, device_id = 0, gpu_mem_limit = 0_u64, arena_extend_strategy = 0, cudnn_conv_algo_search = 0, do_copy_in_default_stream = true)","args_html":"(session : <a href=\"../OnnxRuntime/InferenceSession.html\">InferenceSession</a>, device_id = <span class=\"n\">0</span>, gpu_mem_limit = <span class=\"n\">0_u64</span>, arena_extend_strategy = <span class=\"n\">0</span>, cudnn_conv_algo_search = <span class=\"n\">0</span>, do_copy_in_default_stream = <span class=\"n\">true</span>)","location":{"filename":"src/onnxruntime/provider.cr","line_number":67,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L67"},"def":{"name":"new","args":[{"name":"session","external_name":"session","restriction":"InferenceSession"},{"name":"device_id","default_value":"0","external_name":"device_id","restriction":""},{"name":"gpu_mem_limit","default_value":"0_u64","external_name":"gpu_mem_limit","restriction":""},{"name":"arena_extend_strategy","default_value":"0","external_name":"arena_extend_strategy","restriction":""},{"name":"cudnn_conv_algo_search","default_value":"0","external_name":"cudnn_conv_algo_search","restriction":""},{"name":"do_copy_in_default_stream","default_value":"true","external_name":"do_copy_in_default_stream","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(session, device_id, gpu_mem_limit, arena_extend_strategy, cudnn_conv_algo_search, do_copy_in_default_stream)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer to release resources","summary":"<p>Finalizer to release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":79,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L79"},"def":{"name":"finalize","visibility":"Public","body":"release"},"external_var":false},{"html_id":"release-instance-method","name":"release","doc":"Explicitly release resources","summary":"<p>Explicitly release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":84,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L84"},"def":{"name":"release","visibility":"Public","body":"if @released\n  return\nend\nif @options\n  @api.release_cuda_provider_options.call(@options)\nend\n@released = true\n"},"external_var":false},{"html_id":"to_unsafe:Pointer(OnnxRuntime::LibOnnxRuntime::OrtCUDAProviderOptionsV2)-instance-method","name":"to_unsafe","doc":"Get the underlying OrtCUDAProviderOptionsV2 pointer","summary":"<p>Get the underlying OrtCUDAProviderOptionsV2 pointer</p>","abstract":false,"location":{"filename":"src/onnxruntime/provider.cr","line_number":91,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L91"},"def":{"name":"to_unsafe","visibility":"Public","body":"@options"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/InferenceSession","path":"OnnxRuntime/InferenceSession.html","kind":"class","full_name":"OnnxRuntime::InferenceSession","name":"InferenceSession","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/inference_session.cr","line_number":2,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L2"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"class_methods":[{"html_id":"release_env-class-method","name":"release_env","doc":"Class method to explicitly release the environment\nThis method is now a wrapper around OrtEnvironment.instance.release","summary":"<p>Class method to explicitly release the environment This method is now a wrapper around OrtEnvironment.instance.release</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":332,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L332"},"def":{"name":"release_env","visibility":"Public","body":"begin\n  OrtEnvironment.instance.release\nrescue ex\n  STDERR.puts(\"Error releasing ONNX Runtime environment: #{ex.message}\")\nend"},"external_var":false}],"constructors":[{"html_id":"new(path_or_bytes,provider:Provider|Nil=nil,**session_options)-class-method","name":"new","abstract":false,"args":[{"name":"path_or_bytes","external_name":"path_or_bytes","restriction":""},{"name":"provider","default_value":"nil","external_name":"provider","restriction":"Provider | ::Nil"}],"args_string":"(path_or_bytes, provider : Provider | Nil = nil, **session_options)","args_html":"(path_or_bytes, provider : <a href=\"../OnnxRuntime/Provider.html\">Provider</a> | Nil = <span class=\"n\">nil</span>, **session_options)","location":{"filename":"src/onnxruntime/inference_session.cr","line_number":22,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L22"},"def":{"name":"new","args":[{"name":"path_or_bytes","external_name":"path_or_bytes","restriction":""},{"name":"provider","default_value":"nil","external_name":"provider","restriction":"Provider | ::Nil"}],"double_splat":{"name":"session_options","external_name":"session_options","restriction":""},"visibility":"Public","body":"_ = allocate\n_.initialize(path_or_bytes, provider, **session_options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"allocator:Pointer(LibOnnxRuntime::OrtAllocator)-instance-method","name":"allocator","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":5,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L5"},"def":{"name":"allocator","return_type":"Pointer(LibOnnxRuntime::OrtAllocator)","visibility":"Public","body":"@allocator"},"external_var":false},{"html_id":"check_status(status)-instance-method","name":"check_status","doc":"Make check_status public so it can be used by SparseTensor","summary":"<p>Make check_status public so it can be used by SparseTensor</p>","abstract":false,"args":[{"name":"status","external_name":"status","restriction":""}],"args_string":"(status)","args_html":"(status)","location":{"filename":"src/onnxruntime/inference_session.cr","line_number":306,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L306"},"def":{"name":"check_status","args":[{"name":"status","external_name":"status","restriction":""}],"visibility":"Public","body":"if status.null?\n  return\nend\n\nerror_code = api.get_error_code.call(status)\nerror_message = String.new(api.get_error_message.call(status))\napi.release_status.call(status)\n\nraise(\"ONNXRuntime Error: #{error_message} (#{error_code})\")\n"},"external_var":false},{"html_id":"create_api-instance-method","name":"create_api","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":14,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L14"},"def":{"name":"create_api","visibility":"Public","body":"(LibOnnxRuntime\n  .OrtGetApiBase.value\n  .get_api\n  .call(OnnxRuntime::LibOnnxRuntime::ORT_API_VERSION))\n  .value"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer only releases session-specific resources\nEnvironment is managed separately and should be released explicitly by the user","summary":"<p>Finalizer only releases session-specific resources Environment is managed separately and should be released explicitly by the user</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":61,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L61"},"def":{"name":"finalize","visibility":"Public","body":"release_session\nrelease_allocator\n"},"external_var":false},{"html_id":"inputs:Array(TensorInfo)-instance-method","name":"inputs","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L6"},"def":{"name":"inputs","return_type":"Array(TensorInfo)","visibility":"Public","body":"@inputs"},"external_var":false},{"html_id":"metadata-instance-method","name":"metadata","doc":"Get model metadata","summary":"<p>Get model metadata</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":326,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L326"},"def":{"name":"metadata","visibility":"Public","body":"ModelMetadata.from_session(self)"},"external_var":false},{"html_id":"outputs:Array(TensorInfo)-instance-method","name":"outputs","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":7,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L7"},"def":{"name":"outputs","return_type":"Array(TensorInfo)","visibility":"Public","body":"@outputs"},"external_var":false},{"html_id":"release_allocator-instance-method","name":"release_allocator","doc":"Method to explicitly release the allocator\nNote: Default allocator may not need to be released, so commented out","summary":"<p>Method to explicitly release the allocator Note: Default allocator may not need to be released, so commented out</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":76,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L76"},"def":{"name":"release_allocator","visibility":"Public","body":""},"external_var":false},{"html_id":"release_session-instance-method","name":"release_session","doc":"Method to explicitly release the session","summary":"<p>Method to explicitly release the session</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":68,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L68"},"def":{"name":"release_session","visibility":"Public","body":"if @session_released\n  return\nend\nif @session\n  api.release_session.call(@session)\nend\n@session_released = true\n"},"external_var":false},{"html_id":"run(input_feed,output_names=nil,run_options:RunOptions|Nil=nil,**options)-instance-method","name":"run","abstract":false,"args":[{"name":"input_feed","external_name":"input_feed","restriction":""},{"name":"output_names","default_value":"nil","external_name":"output_names","restriction":""},{"name":"run_options","default_value":"nil","external_name":"run_options","restriction":"RunOptions | ::Nil"}],"args_string":"(input_feed, output_names = nil, run_options : RunOptions | Nil = nil, **options)","args_html":"(input_feed, output_names = <span class=\"n\">nil</span>, run_options : <a href=\"../OnnxRuntime/RunOptions.html\">RunOptions</a> | Nil = <span class=\"n\">nil</span>, **options)","location":{"filename":"src/onnxruntime/inference_session.cr","line_number":187,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L187"},"def":{"name":"run","args":[{"name":"input_feed","external_name":"input_feed","restriction":""},{"name":"output_names","default_value":"nil","external_name":"output_names","restriction":""},{"name":"run_options","default_value":"nil","external_name":"run_options","restriction":"RunOptions | ::Nil"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"begin\n  owned_run_options = run_options.nil?\n  run_options_ptr = run_options ? run_options.to_unsafe : api_create_run_options\n  input_tensors = [] of Pointer(LibOnnxRuntime::OrtValue)\n\n\n  if tag = options[\"tag\"]?\n    api_call() do |__arg8| __arg8.run_options_set_run_tag.call(run_options_ptr, tag.to_s) end\n  end\n\n  if level = options[\"log_severity_level\"]?\n    api_call() do |__arg9| __arg9.run_options_set_run_log_severity_level.call(run_options_ptr, level.to_i) end\n  end\n\n  if level = options[\"log_verbosity_level\"]?\n    api_call() do |__arg10| __arg10.run_options_set_run_log_verbosity_level.call(run_options_ptr, level.to_i) end\n  end\n\n\n  input_names = [] of String\n\n\n  shapes = options[\"shape\"]?.try do |__arg11| __arg11.as(Hash(String, Array(Int64))) end\n\n  input_feed.each do |name, data|\n    shape = shapes.try(&.[]?(name))\n    tensor = data_to_tensor(name, data, shape)\n    input_tensors << tensor\n    input_names << name\n  end\n\n\n  output_names = output_names || @outputs.map(&.name)\n\n\n  output_tensors = Array(Pointer(LibOnnxRuntime::OrtValue)).new(output_names.size, Pointer(LibOnnxRuntime::OrtValue).null)\n\n\n  input_names_ptr = input_names.map do |name| ort_string(name) end\n  output_names_ptr = output_names.map do |name| ort_string(name) end\n\n  api_call do |__arg14|\n    __arg14.run.call(@session, run_options_ptr, input_names_ptr.to_unsafe, input_tensors.to_unsafe, input_tensors.size.to_u64, output_names_ptr.to_unsafe, output_names.size.to_u64, output_tensors.to_unsafe)\n  end\n\n\n  NamedTensors.new.tap do |result|\n    output_names.each_with_index do |name, i|\n      if tensor = output_tensors[i]\n      else\n        next\n      end\n      result[name] = Tensor.extract_data(tensor, self)\n    end\n  end\nensure\n  if output_tensors\n    output_tensors.each do |tensor| if tensor\n      api.release_value.call(tensor)\n    end end\n  end\n\n\n  if owned_run_options && run_options_ptr\n    api.release_run_options.call(run_options_ptr)\n  end\n\n\n  if input_tensors\n    input_tensors.each do |tensor| if tensor\n      api.release_value.call(tensor)\n    end end\n  end\nend"},"external_var":false},{"html_id":"session:Pointer(LibOnnxRuntime::OrtSession)-instance-method","name":"session","doc":"Use OrtEnvironment singleton for environment management","summary":"<p>Use OrtEnvironment singleton for environment management</p>","abstract":false,"location":{"filename":"src/onnxruntime/inference_session.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/inference_session.cr#L4"},"def":{"name":"session","return_type":"Pointer(LibOnnxRuntime::OrtSession)","visibility":"Public","body":"@session"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/IoBinding","path":"OnnxRuntime/IoBinding.html","kind":"class","full_name":"OnnxRuntime::IoBinding","name":"IoBinding","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/io_binding.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L4"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"IoBinding class provides zero-copy inference and advanced input/output binding.\nThis is a placeholder for future implementation.","summary":"<p>IoBinding class provides zero-copy inference and advanced input/output binding.</p>","constructors":[{"html_id":"new(session:InferenceSession)-class-method","name":"new","doc":"Creates a new IoBinding instance.","summary":"<p>Creates a new IoBinding instance.</p>","abstract":false,"args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"args_string":"(session : InferenceSession)","args_html":"(session : <a href=\"../OnnxRuntime/InferenceSession.html\">InferenceSession</a>)","location":{"filename":"src/onnxruntime/io_binding.cr","line_number":9,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L9"},"def":{"name":"new","args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"visibility":"Public","body":"_ = allocate\n_.initialize(session)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"bind_input(name:String,tensor_ptr:Pointer(LibOnnxRuntime::OrtValue))-instance-method","name":"bind_input","doc":"Bind input to a tensor","summary":"<p>Bind input to a tensor</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"tensor_ptr","external_name":"tensor_ptr","restriction":"Pointer(LibOnnxRuntime::OrtValue)"}],"args_string":"(name : String, tensor_ptr : Pointer(LibOnnxRuntime::OrtValue))","args_html":"(name : String, tensor_ptr : Pointer(LibOnnxRuntime::OrtValue))","location":{"filename":"src/onnxruntime/io_binding.cr","line_number":28,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L28"},"def":{"name":"bind_input","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"tensor_ptr","external_name":"tensor_ptr","restriction":"Pointer(LibOnnxRuntime::OrtValue)"}],"visibility":"Public","body":"status = @api.bind_input.call(@io_binding, name.to_unsafe, tensor_ptr)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"bind_output(name:String,tensor_ptr:Pointer(LibOnnxRuntime::OrtValue))-instance-method","name":"bind_output","doc":"Bind output to a tensor","summary":"<p>Bind output to a tensor</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"tensor_ptr","external_name":"tensor_ptr","restriction":"Pointer(LibOnnxRuntime::OrtValue)"}],"args_string":"(name : String, tensor_ptr : Pointer(LibOnnxRuntime::OrtValue))","args_html":"(name : String, tensor_ptr : Pointer(LibOnnxRuntime::OrtValue))","location":{"filename":"src/onnxruntime/io_binding.cr","line_number":35,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L35"},"def":{"name":"bind_output","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"tensor_ptr","external_name":"tensor_ptr","restriction":"Pointer(LibOnnxRuntime::OrtValue)"}],"visibility":"Public","body":"status = @api.bind_output.call(@io_binding, name.to_unsafe, tensor_ptr)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer to release resources","summary":"<p>Finalizer to release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/io_binding.cr","line_number":16,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L16"},"def":{"name":"finalize","visibility":"Public","body":"release"},"external_var":false},{"html_id":"release-instance-method","name":"release","doc":"Explicitly release resources","summary":"<p>Explicitly release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/io_binding.cr","line_number":21,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L21"},"def":{"name":"release","visibility":"Public","body":"if @released\n  return\nend\nif @io_binding\n  @api.release_io_binding.call(@io_binding)\nend\n@released = true\n"},"external_var":false},{"html_id":"to_unsafe:Pointer(OnnxRuntime::LibOnnxRuntime::OrtIoBinding)-instance-method","name":"to_unsafe","doc":"Get the underlying OrtIoBinding pointer","summary":"<p>Get the underlying OrtIoBinding pointer</p>","abstract":false,"location":{"filename":"src/onnxruntime/io_binding.cr","line_number":42,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/io_binding.cr#L42"},"def":{"name":"to_unsafe","visibility":"Public","body":"@io_binding"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/ModelMetadata","path":"OnnxRuntime/ModelMetadata.html","kind":"class","full_name":"OnnxRuntime::ModelMetadata","name":"ModelMetadata","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/model_metadata.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"ModelMetadata class provides access to ONNX model metadata.","summary":"<p>ModelMetadata class provides access to ONNX model metadata.</p>","class_methods":[{"html_id":"from_session(session:InferenceSession)-class-method","name":"from_session","doc":"Creates a new ModelMetadata instance from a session.","summary":"<p>Creates a new ModelMetadata instance from a session.</p>","abstract":false,"args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"args_string":"(session : InferenceSession)","args_html":"(session : <a href=\"../OnnxRuntime/InferenceSession.html\">InferenceSession</a>)","location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":13,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L13"},"def":{"name":"from_session","args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"visibility":"Public","body":"metadata = Pointer(LibOnnxRuntime::OrtModelMetadata).null\napi = session.api\n\n\nstatus = api.session_get_model_metadata.call(session.session, pointerof(metadata))\nsession.check_status(status)\n\nbegin\n  producer_name = get_metadata_string(api, metadata, session.allocator, session) do |md, alloc, ptr|\n    api.model_metadata_get_producer_name.call(md, alloc, ptr)\n  end\n\n\n  graph_name = get_metadata_string(api, metadata, session.allocator, session) do |md, alloc, ptr|\n    api.model_metadata_get_graph_name.call(md, alloc, ptr)\n  end\n\n\n  domain = get_metadata_string(api, metadata, session.allocator, session) do |md, alloc, ptr|\n    api.model_metadata_get_domain.call(md, alloc, ptr)\n  end\n\n\n  description = get_metadata_string(api, metadata, session.allocator, session) do |md, alloc, ptr|\n    api.model_metadata_get_description.call(md, alloc, ptr)\n  end\n\n\n  graph_description = get_metadata_string(api, metadata, session.allocator, session) do |md, alloc, ptr|\n    api.model_metadata_get_graph_description.call(md, alloc, ptr)\n  end\n\n\n  version = 0_i64\n  status = api.model_metadata_get_version.call(metadata, pointerof(version))\n  session.check_status(status)\n\n\n  custom_metadata_map = get_custom_metadata_map(api, metadata, session)\n\n  new(producer_name, graph_name, domain, description, graph_description, version, custom_metadata_map)\nensure\n  if metadata\n    api.release_model_metadata.call(metadata)\n  end\nend\n"},"external_var":false}],"instance_methods":[{"html_id":"custom_metadata_map:Hash(String,String)-instance-method","name":"custom_metadata_map","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":10,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L10"},"def":{"name":"custom_metadata_map","return_type":"Hash(String, String)","visibility":"Public","body":"@custom_metadata_map"},"external_var":false},{"html_id":"description:String-instance-method","name":"description","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":7,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L7"},"def":{"name":"description","return_type":"String","visibility":"Public","body":"@description"},"external_var":false},{"html_id":"domain:String-instance-method","name":"domain","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L6"},"def":{"name":"domain","return_type":"String","visibility":"Public","body":"@domain"},"external_var":false},{"html_id":"graph_description:String-instance-method","name":"graph_description","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":8,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L8"},"def":{"name":"graph_description","return_type":"String","visibility":"Public","body":"@graph_description"},"external_var":false},{"html_id":"graph_name:String-instance-method","name":"graph_name","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":5,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L5"},"def":{"name":"graph_name","return_type":"String","visibility":"Public","body":"@graph_name"},"external_var":false},{"html_id":"producer_name:String-instance-method","name":"producer_name","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L4"},"def":{"name":"producer_name","return_type":"String","visibility":"Public","body":"@producer_name"},"external_var":false},{"html_id":"version:Int64-instance-method","name":"version","abstract":false,"location":{"filename":"src/onnxruntime/model_metadata.cr","line_number":9,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/model_metadata.cr#L9"},"def":{"name":"version","return_type":"Int64","visibility":"Public","body":"@version"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/NamedTensors","path":"OnnxRuntime/NamedTensors.html","kind":"alias","full_name":"OnnxRuntime::NamedTensors","name":"NamedTensors","abstract":false,"locations":[{"filename":"src/onnxruntime/tensor.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"Hash(String, Array(Bool) | Array(Float32) | Array(Float64) | Array(Int16) | Array(Int32) | Array(Int64) | Array(Int8) | Array(String) | Array(UInt16) | Array(UInt32) | Array(UInt64) | Array(UInt8) | OnnxRuntime::SparseTensor(Float32) | OnnxRuntime::SparseTensor(Float64) | OnnxRuntime::SparseTensor(Int32) | OnnxRuntime::SparseTensor(Int64))","aliased_html":"Hash(String, Array(Bool) | Array(Float32) | Array(Float64) | Array(Int16) | Array(Int32) | Array(Int64) | Array(Int8) | Array(String) | Array(UInt16) | Array(UInt32) | Array(UInt64) | Array(UInt8) | <a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Float32)</a> | <a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Float64)</a> | <a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Int32)</a> | <a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Int64)</a>)","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Type alias for named tensors (output from inference)","summary":"<p>Type alias for named tensors (output from inference)</p>"},{"html_id":"onnxruntime/OnnxRuntime/OrtEnvironment","path":"OnnxRuntime/OrtEnvironment.html","kind":"class","full_name":"OnnxRuntime::OrtEnvironment","name":"OrtEnvironment","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/ort_environment.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L4"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"OrtEnvironment is a singleton class that manages the ONNX Runtime environment.\nIt ensures that only one environment exists per process and provides thread-safe access.","summary":"<p>OrtEnvironment is a singleton class that manages the ONNX Runtime environment.</p>","class_methods":[{"html_id":"instance-class-method","name":"instance","doc":"Get the singleton instance of OrtEnvironment","summary":"<p>Get the singleton instance of OrtEnvironment</p>","abstract":false,"location":{"filename":"src/onnxruntime/ort_environment.cr","line_number":13,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L13"},"def":{"name":"instance","visibility":"Public","body":"@@mutex.synchronize do\n  @@instance || (@@instance = new)\nend"},"external_var":false}],"instance_methods":[{"html_id":"api-instance-method","name":"api","doc":"Get the API","summary":"<p>Get the API</p>","abstract":false,"location":{"filename":"src/onnxruntime/ort_environment.cr","line_number":56,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L56"},"def":{"name":"api","visibility":"Public","body":"(OnnxRuntime::LibOnnxRuntime\n  .OrtGetApiBase.value\n  .get_api\n  .call(OnnxRuntime::LibOnnxRuntime::ORT_API_VERSION))\n  .value"},"external_var":false},{"html_id":"env-instance-method","name":"env","doc":"Get the environment pointer","summary":"<p>Get the environment pointer</p>","abstract":false,"location":{"filename":"src/onnxruntime/ort_environment.cr","line_number":27,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L27"},"def":{"name":"env","visibility":"Public","body":"if @released\n  raise(\"Environment has been released\")\nend\n@env\n"},"external_var":false},{"html_id":"release-instance-method","name":"release","doc":"Release the environment in a thread-safe manner","summary":"<p>Release the environment in a thread-safe manner</p>","abstract":false,"location":{"filename":"src/onnxruntime/ort_environment.cr","line_number":38,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L38"},"def":{"name":"release","visibility":"Public","body":"if @released\n  return\nend\n\n@@mutex.synchronize do\n  if @released\n    return\n  end\n\n  begin\n    api.release_env.call(@env)\n    @released = true\n    @@instance = nil\n  rescue ex\n    STDERR.puts(\"Error releasing ONNX Runtime environment: #{ex.message}\")\n  end\nend\n"},"external_var":false},{"html_id":"released?:Bool-instance-method","name":"released?","doc":"Check if the environment has been released","summary":"<p>Check if the environment has been released</p>","abstract":false,"location":{"filename":"src/onnxruntime/ort_environment.cr","line_number":33,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/ort_environment.cr#L33"},"def":{"name":"released?","visibility":"Public","body":"@released"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/Provider","path":"OnnxRuntime/Provider.html","kind":"class","full_name":"OnnxRuntime::Provider","name":"Provider","abstract":true,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"onnxruntime/OnnxRuntime/CpuProvider","kind":"class","full_name":"OnnxRuntime::CpuProvider","name":"CpuProvider"},{"html_id":"onnxruntime/OnnxRuntime/CudaProvider","kind":"class","full_name":"OnnxRuntime::CudaProvider","name":"CudaProvider"}],"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Abstract base class for execution providers","summary":"<p>Abstract base class for execution providers</p>","instance_methods":[{"html_id":"name:String-instance-method","name":"name","doc":"Get the provider name","summary":"<p>Get the provider name</p>","abstract":true,"location":{"filename":"src/onnxruntime/provider.cr","line_number":5,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L5"},"def":{"name":"name","return_type":"String","visibility":"Public","body":""},"external_var":false},{"html_id":"options:ProviderOptions|Nil-instance-method","name":"options","doc":"Get the provider options","summary":"<p>Get the provider options</p>","abstract":true,"location":{"filename":"src/onnxruntime/provider.cr","line_number":8,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L8"},"def":{"name":"options","return_type":"ProviderOptions | ::Nil","visibility":"Public","body":""},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/ProviderOptions","path":"OnnxRuntime/ProviderOptions.html","kind":"class","full_name":"OnnxRuntime::ProviderOptions","name":"ProviderOptions","abstract":true,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/provider.cr","line_number":12,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L12"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"onnxruntime/OnnxRuntime/CpuProviderOptions","kind":"class","full_name":"OnnxRuntime::CpuProviderOptions","name":"CpuProviderOptions"},{"html_id":"onnxruntime/OnnxRuntime/CudaProviderOptions","kind":"class","full_name":"OnnxRuntime::CudaProviderOptions","name":"CudaProviderOptions"}],"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Abstract base class for provider options","summary":"<p>Abstract base class for provider options</p>","instance_methods":[{"html_id":"to_unsafe-instance-method","name":"to_unsafe","doc":"Convert to C API representation","summary":"<p>Convert to C API representation</p>","abstract":true,"location":{"filename":"src/onnxruntime/provider.cr","line_number":14,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/provider.cr#L14"},"def":{"name":"to_unsafe","visibility":"Public","body":""},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/RunOptions","path":"OnnxRuntime/RunOptions.html","kind":"class","full_name":"OnnxRuntime::RunOptions","name":"RunOptions","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/run_options.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"RunOptions class provides options for inference execution.","summary":"<p>RunOptions class provides options for inference execution.</p>","constructors":[{"html_id":"new(session:InferenceSession)-class-method","name":"new","doc":"Creates a new RunOptions instance.","summary":"<p>Creates a new RunOptions instance.</p>","abstract":false,"args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"args_string":"(session : InferenceSession)","args_html":"(session : <a href=\"../OnnxRuntime/InferenceSession.html\">InferenceSession</a>)","location":{"filename":"src/onnxruntime/run_options.cr","line_number":8,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L8"},"def":{"name":"new","args":[{"name":"session","external_name":"session","restriction":"InferenceSession"}],"visibility":"Public","body":"_ = allocate\n_.initialize(session)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"finalize-instance-method","name":"finalize","doc":"Finalizer to release resources","summary":"<p>Finalizer to release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/run_options.cr","line_number":14,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L14"},"def":{"name":"finalize","visibility":"Public","body":"release"},"external_var":false},{"html_id":"log_severity_level=(level:Int32)-instance-method","name":"log_severity_level=","doc":"Set run log severity level","summary":"<p>Set run log severity level</p>","abstract":false,"args":[{"name":"level","external_name":"level","restriction":"Int32"}],"args_string":"(level : Int32)","args_html":"(level : Int32)","location":{"filename":"src/onnxruntime/run_options.cr","line_number":33,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L33"},"def":{"name":"log_severity_level=","args":[{"name":"level","external_name":"level","restriction":"Int32"}],"visibility":"Public","body":"status = @api.run_options_set_run_log_severity_level.call(@run_options, level)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"log_verbosity_level=(level:Int32)-instance-method","name":"log_verbosity_level=","doc":"Set run log verbosity level","summary":"<p>Set run log verbosity level</p>","abstract":false,"args":[{"name":"level","external_name":"level","restriction":"Int32"}],"args_string":"(level : Int32)","args_html":"(level : Int32)","location":{"filename":"src/onnxruntime/run_options.cr","line_number":40,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L40"},"def":{"name":"log_verbosity_level=","args":[{"name":"level","external_name":"level","restriction":"Int32"}],"visibility":"Public","body":"status = @api.run_options_set_run_log_verbosity_level.call(@run_options, level)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"release-instance-method","name":"release","doc":"Explicitly release resources","summary":"<p>Explicitly release resources</p>","abstract":false,"location":{"filename":"src/onnxruntime/run_options.cr","line_number":19,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L19"},"def":{"name":"release","visibility":"Public","body":"if @released\n  return\nend\nif @run_options\n  @api.release_run_options.call(@run_options)\nend\n@released = true\n"},"external_var":false},{"html_id":"tag=(tag:String)-instance-method","name":"tag=","doc":"Set run tag","summary":"<p>Set run tag</p>","abstract":false,"args":[{"name":"tag","external_name":"tag","restriction":"String"}],"args_string":"(tag : String)","args_html":"(tag : String)","location":{"filename":"src/onnxruntime/run_options.cr","line_number":26,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L26"},"def":{"name":"tag=","args":[{"name":"tag","external_name":"tag","restriction":"String"}],"visibility":"Public","body":"status = @api.run_options_set_run_tag.call(@run_options, tag)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"terminate-instance-method","name":"terminate","doc":"Set terminate flag","summary":"<p>Set terminate flag</p>","abstract":false,"location":{"filename":"src/onnxruntime/run_options.cr","line_number":47,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L47"},"def":{"name":"terminate","visibility":"Public","body":"status = @api.run_options_set_terminate.call(@run_options)\ncheck_status(status)\nself\n"},"external_var":false},{"html_id":"to_unsafe:Pointer(OnnxRuntime::LibOnnxRuntime::OrtRunOptions)-instance-method","name":"to_unsafe","doc":"Get the underlying OrtRunOptions pointer","summary":"<p>Get the underlying OrtRunOptions pointer</p>","abstract":false,"location":{"filename":"src/onnxruntime/run_options.cr","line_number":54,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/run_options.cr#L54"},"def":{"name":"to_unsafe","visibility":"Public","body":"@run_options"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/SparseTensor","path":"OnnxRuntime/SparseTensor.html","kind":"class","full_name":"OnnxRuntime::SparseTensor(T)","name":"SparseTensor","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":9,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L9"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"SparseTensor class provides high-level API for working with sparse tensors in ONNX Runtime.","summary":"<p>SparseTensor class provides high-level API for working with sparse tensors in ONNX Runtime.</p>","class_methods":[{"html_id":"block_sparse(values:Array(T),indices:Array,dense_shape:Array(Int64))forallT-class-method","name":"block_sparse","doc":"Creates a BlockSparse format sparse tensor.\n\n* `values` - The non-zero values in the sparse tensor\n* `indices` - The block indices\n* `dense_shape` - The shape of the dense tensor this sparse tensor represents","summary":"<p>Creates a BlockSparse format sparse tensor.</p>","abstract":false,"args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"args_string":"(values : Array(T), indices : Array, dense_shape : Array(Int64)) forall T","args_html":"(values : Array(T), indices : Array, dense_shape : Array(Int64)) forall T","location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":61,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L61"},"def":{"name":"block_sparse","args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"visibility":"Public","body":"indices_hash = {} of Symbol => Array(Int32) | Array(Int64)\n\nindices_hash[:block_indices] = indices.map(&.to_i32)\n\nnew(LibOnnxRuntime::SparseFormat::BLOCK_SPARSE, values, indices_hash, dense_shape)\n"},"external_var":false},{"html_id":"coo(values:Array(T),indices:Array,dense_shape:Array(Int64))forallT-class-method","name":"coo","doc":"Creates a COO format sparse tensor.\n\n* `values` - The non-zero values in the sparse tensor\n* `indices` - The indices data for the sparse tensor (2D array where each row is a coordinate)\n* `dense_shape` - The shape of the dense tensor this sparse tensor represents","summary":"<p>Creates a COO format sparse tensor.</p>","abstract":false,"args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"args_string":"(values : Array(T), indices : Array, dense_shape : Array(Int64)) forall T","args_html":"(values : Array(T), indices : Array, dense_shape : Array(Int64)) forall T","location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":26,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L26"},"def":{"name":"coo","args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"visibility":"Public","body":"indices_hash = {} of Symbol => Array(Int32) | Array(Int64)\n\nif indices.first.is_a?(Int32)\n  indices_hash[:coo_indices] = indices.flatten.as(Array(Int32))\nelse\n  indices_hash[:coo_indices] = indices.flatten.map(&.to_i64)\nend\n\nnew(LibOnnxRuntime::SparseFormat::COO, values, indices_hash, dense_shape)\n"},"external_var":false},{"html_id":"csr(values:Array(T),inner_indices:Array,outer_indices:Array,dense_shape:Array(Int64))forallT-class-method","name":"csr","doc":"Creates a CSR format sparse tensor.\n\n* `values` - The non-zero values in the sparse tensor\n* `inner_indices` - The column indices for each non-zero value\n* `outer_indices` - The row pointers indicating where each row starts in the values array\n* `dense_shape` - The shape of the dense tensor this sparse tensor represents","summary":"<p>Creates a CSR format sparse tensor.</p>","abstract":false,"args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"inner_indices","external_name":"inner_indices","restriction":"Array"},{"name":"outer_indices","external_name":"outer_indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"args_string":"(values : Array(T), inner_indices : Array, outer_indices : Array, dense_shape : Array(Int64)) forall T","args_html":"(values : Array(T), inner_indices : Array, outer_indices : Array, dense_shape : Array(Int64)) forall T","location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":47,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L47"},"def":{"name":"csr","args":[{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"inner_indices","external_name":"inner_indices","restriction":"Array"},{"name":"outer_indices","external_name":"outer_indices","restriction":"Array"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"visibility":"Public","body":"indices_hash = {} of Symbol => Array(Int32) | Array(Int64)\n\nindices_hash[:inner_indices] = inner_indices.map(&.to_i64)\nindices_hash[:outer_indices] = outer_indices.map(&.to_i64)\n\nnew(LibOnnxRuntime::SparseFormat::CSRC, values, indices_hash, dense_shape)\n"},"external_var":false}],"constructors":[{"html_id":"new(format:LibOnnxRuntime::SparseFormat,values:Array(T),indices:Hash(Symbol,Array(Int32)|Array(Int64)),dense_shape:Array(Int64))-class-method","name":"new","doc":"Creates a new SparseTensor instance.\n\n* `format` - The sparse tensor format (COO, CSR, or BLOCK_SPARSE)\n* `values` - The non-zero values in the sparse tensor\n* `indices` - The indices data for the sparse tensor (format-specific)\n* `dense_shape` - The shape of the dense tensor this sparse tensor represents","summary":"<p>Creates a new SparseTensor instance.</p>","abstract":false,"args":[{"name":"format","external_name":"format","restriction":"LibOnnxRuntime::SparseFormat"},{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Hash(Symbol, Array(Int32) | Array(Int64))"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"args_string":"(format : LibOnnxRuntime::SparseFormat, values : Array(T), indices : Hash(Symbol, Array(Int32) | Array(Int64)), dense_shape : Array(Int64))","args_html":"(format : LibOnnxRuntime::SparseFormat, values : Array(T), indices : Hash(Symbol, Array(Int32) | Array(Int64)), dense_shape : Array(Int64))","location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":18,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L18"},"def":{"name":"new","args":[{"name":"format","external_name":"format","restriction":"LibOnnxRuntime::SparseFormat"},{"name":"values","external_name":"values","restriction":"Array(T)"},{"name":"indices","external_name":"indices","restriction":"Hash(Symbol, Array(Int32) | Array(Int64))"},{"name":"dense_shape","external_name":"dense_shape","restriction":"Array(Int64)"}],"visibility":"Public","body":"_ = SparseTensor(T).allocate\n_.initialize(format, values, indices, dense_shape)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"dense_shape-instance-method","name":"dense_shape","abstract":false,"location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":10,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L10"},"def":{"name":"dense_shape","visibility":"Public","body":"@dense_shape"},"external_var":false},{"html_id":"format-instance-method","name":"format","abstract":false,"location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":10,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L10"},"def":{"name":"format","visibility":"Public","body":"@format"},"external_var":false},{"html_id":"indices-instance-method","name":"indices","abstract":false,"location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":10,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L10"},"def":{"name":"indices","visibility":"Public","body":"@indices"},"external_var":false},{"html_id":"to_ort_value(session)-instance-method","name":"to_ort_value","doc":"Converts the sparse tensor to an OrtValue that can be used with the ONNX Runtime API.\nNote: The caller is responsible for releasing the returned OrtValue using api.release_value.call(tensor)\n\n* `session` - The InferenceSession instance to use for creating the OrtValue","summary":"<p>Converts the sparse tensor to an OrtValue that can be used with the ONNX Runtime API.</p>","abstract":false,"args":[{"name":"session","external_name":"session","restriction":""}],"args_string":"(session)","args_html":"(session)","location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":73,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L73"},"def":{"name":"to_ort_value","args":[{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"api = session.api\nallocator = session.allocator\ntensor = Pointer(LibOnnxRuntime::OrtValue).null\nmemory_info = Pointer(LibOnnxRuntime::OrtMemoryInfo).null\n\nbegin\n  status = api.create_sparse_tensor_as_ort_value.call(allocator, @dense_shape.to_unsafe, @dense_shape.size.to_u64, element_data_type, pointerof(tensor))\n  session.check_status(status)\n\n\n  status = api.create_cpu_memory_info.call(LibOnnxRuntime::AllocatorType::DEVICE, LibOnnxRuntime::MemType::CPU, pointerof(memory_info))\n  session.check_status(status)\n\n\n  case @format\n  when LibOnnxRuntime::SparseFormat::COO\n    fill_coo_tensor(api, tensor, memory_info, session)\n  when LibOnnxRuntime::SparseFormat::CSRC\n    fill_csr_tensor(api, tensor, memory_info, session)\n  when LibOnnxRuntime::SparseFormat::BLOCK_SPARSE\n    fill_block_sparse_tensor(api, tensor, memory_info, session)\n  else\n    raise(\"Unsupported sparse format: #{@format}\")\n  end\n\n\n  tensor\nensure\n  if memory_info\n    api.release_memory_info.call(memory_info)\n  end\nend\n"},"external_var":false},{"html_id":"values-instance-method","name":"values","abstract":false,"location":{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":10,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L10"},"def":{"name":"values","visibility":"Public","body":"@values"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/SparseTensorFloat32","path":"OnnxRuntime/SparseTensorFloat32.html","kind":"alias","full_name":"OnnxRuntime::SparseTensorFloat32","name":"SparseTensorFloat32","abstract":false,"locations":[{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"OnnxRuntime::SparseTensor(Float32)","aliased_html":"<a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Float32)</a>","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Type aliases for common SparseTensor types","summary":"<p>Type aliases for common SparseTensor types</p>"},{"html_id":"onnxruntime/OnnxRuntime/SparseTensorFloat64","path":"OnnxRuntime/SparseTensorFloat64.html","kind":"alias","full_name":"OnnxRuntime::SparseTensorFloat64","name":"SparseTensorFloat64","abstract":false,"locations":[{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L6"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"OnnxRuntime::SparseTensor(Float64)","aliased_html":"<a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Float64)</a>","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"}},{"html_id":"onnxruntime/OnnxRuntime/SparseTensorInt32","path":"OnnxRuntime/SparseTensorInt32.html","kind":"alias","full_name":"OnnxRuntime::SparseTensorInt32","name":"SparseTensorInt32","abstract":false,"locations":[{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L4"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"OnnxRuntime::SparseTensor(Int32)","aliased_html":"<a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Int32)</a>","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"}},{"html_id":"onnxruntime/OnnxRuntime/SparseTensorInt64","path":"OnnxRuntime/SparseTensorInt64.html","kind":"alias","full_name":"OnnxRuntime::SparseTensorInt64","name":"SparseTensorInt64","abstract":false,"locations":[{"filename":"src/onnxruntime/sparse_tensor.cr","line_number":5,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/sparse_tensor.cr#L5"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"OnnxRuntime::SparseTensor(Int64)","aliased_html":"<a href=\"../OnnxRuntime/SparseTensor.html\">OnnxRuntime::SparseTensor(Int64)</a>","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"}},{"html_id":"onnxruntime/OnnxRuntime/Tensor","path":"OnnxRuntime/Tensor.html","kind":"class","full_name":"OnnxRuntime::Tensor","name":"Tensor","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/tensor.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L6"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Tensor class provides high-level API for working with dense tensors in ONNX Runtime.","summary":"<p>Tensor class provides high-level API for working with dense tensors in ONNX Runtime.</p>","class_methods":[{"html_id":"create(data:Array(Float32),shape=nil,session=nil)-class-method","name":"create","doc":"Creates a tensor from various data types","summary":"<p>Creates a tensor from various data types</p>","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Float32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Float32), shape = nil, session = nil)","args_html":"(data : Array(Float32), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":8,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L8"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Float32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::FLOAT, sizeof(Float32), session)"},"external_var":false},{"html_id":"create(data:Array(Int32),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Int32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Int32), shape = nil, session = nil)","args_html":"(data : Array(Int32), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":12,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L12"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Int32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::INT32, sizeof(Int32), session)"},"external_var":false},{"html_id":"create(data:Array(Int64),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Int64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Int64), shape = nil, session = nil)","args_html":"(data : Array(Int64), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":16,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L16"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Int64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::INT64, sizeof(Int64), session)"},"external_var":false},{"html_id":"create(data:Array(Float64),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Float64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Float64), shape = nil, session = nil)","args_html":"(data : Array(Float64), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":20,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L20"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Float64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::DOUBLE, sizeof(Float64), session)"},"external_var":false},{"html_id":"create(data:Array(UInt8),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(UInt8)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(UInt8), shape = nil, session = nil)","args_html":"(data : Array(UInt8), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":24,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L24"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(UInt8)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::UINT8, sizeof(UInt8), session)"},"external_var":false},{"html_id":"create(data:Array(Int8),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Int8)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Int8), shape = nil, session = nil)","args_html":"(data : Array(Int8), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":28,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L28"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Int8)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::INT8, sizeof(Int8), session)"},"external_var":false},{"html_id":"create(data:Array(UInt16),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(UInt16)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(UInt16), shape = nil, session = nil)","args_html":"(data : Array(UInt16), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":32,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L32"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(UInt16)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::UINT16, sizeof(UInt16), session)"},"external_var":false},{"html_id":"create(data:Array(Int16),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Int16)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Int16), shape = nil, session = nil)","args_html":"(data : Array(Int16), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":36,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L36"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Int16)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::INT16, sizeof(Int16), session)"},"external_var":false},{"html_id":"create(data:Array(UInt32),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(UInt32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(UInt32), shape = nil, session = nil)","args_html":"(data : Array(UInt32), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":40,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L40"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(UInt32)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::UINT32, sizeof(UInt32), session)"},"external_var":false},{"html_id":"create(data:Array(UInt64),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(UInt64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(UInt64), shape = nil, session = nil)","args_html":"(data : Array(UInt64), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":44,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L44"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(UInt64)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::UINT64, sizeof(UInt64), session)"},"external_var":false},{"html_id":"create(data:Array(Bool),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(Bool)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(Bool), shape = nil, session = nil)","args_html":"(data : Array(Bool), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":48,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L48"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(Bool)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_with_data(data, shape, LibOnnxRuntime::TensorElementDataType::BOOL, sizeof(Bool), session)"},"external_var":false},{"html_id":"create(data:Array(String),shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"Array(String)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data : Array(String), shape = nil, session = nil)","args_html":"(data : Array(String), shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":52,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L52"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":"Array(String)"},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"create_string_tensor(data, shape, LibOnnxRuntime::TensorElementDataType::STRING, session)"},"external_var":false},{"html_id":"create(data,shape=nil,session=nil)-class-method","name":"create","abstract":false,"args":[{"name":"data","external_name":"data","restriction":""},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"args_string":"(data, shape = nil, session = nil)","args_html":"(data, shape = <span class=\"n\">nil</span>, session = <span class=\"n\">nil</span>)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":56,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L56"},"def":{"name":"create","args":[{"name":"data","external_name":"data","restriction":""},{"name":"shape","default_value":"nil","external_name":"shape","restriction":""},{"name":"session","default_value":"nil","external_name":"session","restriction":""}],"visibility":"Public","body":"raise(\"Unsupported data type: #{data.class}, #{data.inspect}, shape: #{shape.inspect}\")"},"external_var":false},{"html_id":"extract_data(tensor,session)-class-method","name":"extract_data","doc":"Extract data from a tensor","summary":"<p>Extract data from a tensor</p>","abstract":false,"args":[{"name":"tensor","external_name":"tensor","restriction":""},{"name":"session","external_name":"session","restriction":""}],"args_string":"(tensor, session)","args_html":"(tensor, session)","location":{"filename":"src/onnxruntime/tensor.cr","line_number":161,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor.cr#L161"},"def":{"name":"extract_data","args":[{"name":"tensor","external_name":"tensor","restriction":""},{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"begin\n  type_info = get_type_info(tensor, session)\n  api = session.api\n\n  onnx_type = get_onnx_type_from_type_info(type_info, session)\n\n  case onnx_type\n  when LibOnnxRuntime::OnnxType::TENSOR\n    extract_dense_tensor_data(tensor, type_info, session)\n  when LibOnnxRuntime::OnnxType::SPARSETENSOR\n    extract_sparse_tensor_data(tensor, session)\n  else\n    raise(\"Unsupported ONNX type: #{onnx_type}\")\n  end\nensure\n  if type_info && api\n    api.release_type_info.call(type_info)\n  end\nend"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/TensorElementDataType","path":"OnnxRuntime/TensorElementDataType.html","kind":"alias","full_name":"OnnxRuntime::TensorElementDataType","name":"TensorElementDataType","abstract":false,"locations":[{"filename":"src/onnxruntime.cr","line_number":15,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime.cr#L15"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":true,"aliased":"OnnxRuntime::LibOnnxRuntime::TensorElementDataType","aliased_html":"OnnxRuntime::LibOnnxRuntime::TensorElementDataType","const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"}},{"html_id":"onnxruntime/OnnxRuntime/TensorInfo","path":"OnnxRuntime/TensorInfo.html","kind":"class","full_name":"OnnxRuntime::TensorInfo","name":"TensorInfo","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/tensor_info.cr","line_number":3,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L3"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"Represents metadata for a tensor (name, type, shape).","summary":"<p>Represents metadata for a tensor (name, type, shape).</p>","class_methods":[{"html_id":"from_type_info(name:String,type_info:Pointer(LibOnnxRuntime::OrtTypeInfo),session)-class-method","name":"from_type_info","doc":"Create a TensorInfo from OrtTypeInfo","summary":"<p>Create a TensorInfo from OrtTypeInfo</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"type_info","external_name":"type_info","restriction":"Pointer(LibOnnxRuntime::OrtTypeInfo)"},{"name":"session","external_name":"session","restriction":""}],"args_string":"(name : String, type_info : Pointer(LibOnnxRuntime::OrtTypeInfo), session)","args_html":"(name : String, type_info : Pointer(LibOnnxRuntime::OrtTypeInfo), session)","location":{"filename":"src/onnxruntime/tensor_info.cr","line_number":12,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L12"},"def":{"name":"from_type_info","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"type_info","external_name":"type_info","restriction":"Pointer(LibOnnxRuntime::OrtTypeInfo)"},{"name":"session","external_name":"session","restriction":""}],"visibility":"Public","body":"api = session.api\n\n\nonnx_type = LibOnnxRuntime::OnnxType::TENSOR\nstatus = api.get_onnx_type_from_type_info.call(type_info, pointerof(onnx_type))\nsession.check_status(status)\n\ncase onnx_type\nwhen LibOnnxRuntime::OnnxType::TENSOR\n  tensor_info = Pointer(LibOnnxRuntime::OrtTensorTypeAndShapeInfo).null\n  status = api.cast_type_info_to_tensor_info.call(type_info, pointerof(tensor_info))\n  session.check_status(status)\n\n\n  element_type = LibOnnxRuntime::TensorElementDataType::FLOAT\n  status = api.get_tensor_element_type.call(tensor_info, pointerof(element_type))\n  session.check_status(status)\n\n\n  dims_count = 0_u64\n  status = api.get_dimensions_count.call(tensor_info, pointerof(dims_count))\n  session.check_status(status)\n\n\n  dims = Array(Int64).new(dims_count, 0_i64)\n  status = api.get_dimensions.call(tensor_info, dims.to_unsafe, dims_count)\n  session.check_status(status)\n\n  new(name, LibOnnxRuntime::TensorElementDataType.new(element_type), dims)\nelse\n  raise(\"Unsupported ONNX type: #{onnx_type}\")\nend\n"},"external_var":false}],"constructors":[{"html_id":"new(name:String,type:OnnxRuntime::LibOnnxRuntime::TensorElementDataType,shape:Array(Int64))-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"::String"},{"name":"type","external_name":"type","restriction":"::OnnxRuntime::LibOnnxRuntime::TensorElementDataType"},{"name":"shape","external_name":"shape","restriction":"::Array(::Int64)"}],"args_string":"(name : String, type : OnnxRuntime::LibOnnxRuntime::TensorElementDataType, shape : Array(Int64))","args_html":"(name : String, type : OnnxRuntime::LibOnnxRuntime::TensorElementDataType, shape : Array(Int64))","location":{"filename":"src/onnxruntime/tensor_info.cr","line_number":8,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L8"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"::String"},{"name":"type","external_name":"type","restriction":"::OnnxRuntime::LibOnnxRuntime::TensorElementDataType"},{"name":"shape","external_name":"shape","restriction":"::Array(::Int64)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name, type, shape)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/onnxruntime/tensor_info.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L4"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"},"external_var":false},{"html_id":"shape:Array(Int64)-instance-method","name":"shape","abstract":false,"location":{"filename":"src/onnxruntime/tensor_info.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L6"},"def":{"name":"shape","return_type":"Array(Int64)","visibility":"Public","body":"@shape"},"external_var":false},{"html_id":"type:LibOnnxRuntime::TensorElementDataType-instance-method","name":"type","abstract":false,"location":{"filename":"src/onnxruntime/tensor_info.cr","line_number":5,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/tensor_info.cr#L5"},"def":{"name":"type","return_type":"LibOnnxRuntime::TensorElementDataType","visibility":"Public","body":"@type"},"external_var":false}]},{"html_id":"onnxruntime/OnnxRuntime/TrainingSession","path":"OnnxRuntime/TrainingSession.html","kind":"class","full_name":"OnnxRuntime::TrainingSession","name":"TrainingSession","abstract":false,"superclass":{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"onnxruntime/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"onnxruntime/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/onnxruntime/training_session.cr","line_number":4,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L4"}],"repository_name":"onnxruntime","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"onnxruntime/OnnxRuntime","kind":"module","full_name":"OnnxRuntime","name":"OnnxRuntime"},"doc":"TrainingSession class provides high-level API for training ONNX models.\nThis is a placeholder for future implementation when ONNX Runtime training API is supported.","summary":"<p>TrainingSession class provides high-level API for training ONNX models.</p>","constructors":[{"html_id":"new(env:OrtEnvironment,model_path:String,**options)-class-method","name":"new","doc":"Creates a new TrainingSession instance.","summary":"<p>Creates a new TrainingSession instance.</p>","abstract":false,"args":[{"name":"env","external_name":"env","restriction":"OrtEnvironment"},{"name":"model_path","external_name":"model_path","restriction":"String"}],"args_string":"(env : OrtEnvironment, model_path : String, **options)","args_html":"(env : <a href=\"../OnnxRuntime/OrtEnvironment.html\">OrtEnvironment</a>, model_path : String, **options)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":6,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L6"},"def":{"name":"new","args":[{"name":"env","external_name":"env","restriction":"OrtEnvironment"},{"name":"model_path","external_name":"model_path","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"_ = allocate\n_.initialize(env, model_path, **options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"eval_step(input_feed)-instance-method","name":"eval_step","doc":"Evaluate the model","summary":"<p>Evaluate the model</p>","abstract":false,"args":[{"name":"input_feed","external_name":"input_feed","restriction":""}],"args_string":"(input_feed)","args_html":"(input_feed)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":16,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L16"},"def":{"name":"eval_step","args":[{"name":"input_feed","external_name":"input_feed","restriction":""}],"visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false},{"html_id":"learning_rate=(rate:Float64)-instance-method","name":"learning_rate=","doc":"Set learning rate","summary":"<p>Set learning rate</p>","abstract":false,"args":[{"name":"rate","external_name":"rate","restriction":"Float64"}],"args_string":"(rate : Float64)","args_html":"(rate : Float64)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":36,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L36"},"def":{"name":"learning_rate=","args":[{"name":"rate","external_name":"rate","restriction":"Float64"}],"visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false},{"html_id":"load_checkpoint(checkpoint_path:String)-instance-method","name":"load_checkpoint","doc":"Load a checkpoint","summary":"<p>Load a checkpoint</p>","abstract":false,"args":[{"name":"checkpoint_path","external_name":"checkpoint_path","restriction":"String"}],"args_string":"(checkpoint_path : String)","args_html":"(checkpoint_path : String)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":26,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L26"},"def":{"name":"load_checkpoint","args":[{"name":"checkpoint_path","external_name":"checkpoint_path","restriction":"String"}],"visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false},{"html_id":"optimizer_state-instance-method","name":"optimizer_state","doc":"Get optimizer state","summary":"<p>Get optimizer state</p>","abstract":false,"location":{"filename":"src/onnxruntime/training_session.cr","line_number":31,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L31"},"def":{"name":"optimizer_state","visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false},{"html_id":"save_checkpoint(checkpoint_path:String)-instance-method","name":"save_checkpoint","doc":"Save the trained model","summary":"<p>Save the trained model</p>","abstract":false,"args":[{"name":"checkpoint_path","external_name":"checkpoint_path","restriction":"String"}],"args_string":"(checkpoint_path : String)","args_html":"(checkpoint_path : String)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":21,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L21"},"def":{"name":"save_checkpoint","args":[{"name":"checkpoint_path","external_name":"checkpoint_path","restriction":"String"}],"visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false},{"html_id":"train_step(input_feed)-instance-method","name":"train_step","doc":"Train the model for one step","summary":"<p>Train the model for one step</p>","abstract":false,"args":[{"name":"input_feed","external_name":"input_feed","restriction":""}],"args_string":"(input_feed)","args_html":"(input_feed)","location":{"filename":"src/onnxruntime/training_session.cr","line_number":11,"url":"https://github.com/kojix2/onnxruntime.cr/blob/e9c96de3935bcc9ceb271c9eff2922099db4b604/src/onnxruntime/training_session.cr#L11"},"def":{"name":"train_step","args":[{"name":"input_feed","external_name":"input_feed","restriction":""}],"visibility":"Public","body":"raise(\"TrainingSession is not implemented yet. This is a placeholder for future implementation.\")"},"external_var":false}]}]}]}})